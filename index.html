<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beauty Salon Management System</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container-fluid">
    <!-- Header -->
    <header class="bg-primary text-white py-4 mb-4">
      <h1 class="mb-0">‚ú® Beauty Salon Management System</h1>
      <p class="text-muted mb-0">Manage clients, staff, services, and appointments efficiently</p>
    </header>

    <!-- Main Navigation Tabs -->
    <div class="row">
      <div class="col-12">
        <ul class="nav nav-tabs nav-fill mb-4" id="mainTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="clients-tab" data-bs-toggle="tab" data-bs-target="#clients-panel" type="button" role="tab" aria-controls="clients-panel" aria-selected="true">
              üë• Clients
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="staff-tab" data-bs-toggle="tab" data-bs-target="#staff-panel" type="button" role="tab" aria-controls="staff-panel" aria-selected="false">
              üíº Staff
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services-panel" type="button" role="tab" aria-controls="services-panel" aria-selected="false">
              üé® Services
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="appointments-tab" data-bs-toggle="tab" data-bs-target="#appointments-panel" type="button" role="tab" aria-controls="appointments-panel" aria-selected="false">
              üìÖ Appointments
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="income-tab" data-bs-toggle="tab" data-bs-target="#income-panel" type="button" role="tab" aria-controls="income-panel" aria-selected="false">
              üí∞ Income
            </button>
          </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="mainTabContent">
          <!-- Clients Tab -->
          <div class="tab-pane fade show active" id="clients-panel" role="tabpanel" aria-labelledby="clients-tab">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2>Clients Management</h2>
              <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#clientModal" onclick="openClientModal()">+ Add Client</button>
            </div>
            <div id="clientsContainer" class="table-responsive">
              <table class="table table-striped table-hover">
                <thead class="table-dark">
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>VIP</th>
                    <th>Bad Client</th>
                    <th>Notes</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="clientsTable"></tbody>
              </table>
            </div>
          </div>

          <!-- Staff Tab -->
          <div class="tab-pane fade" id="staff-panel" role="tabpanel" aria-labelledby="staff-tab">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2>Staff Management</h2>
              <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#staffModal" onclick="openStaffModal()">+ Add Staff</button>
            </div>
            <div id="staffContainer" class="table-responsive">
              <table class="table table-striped table-hover">
                <thead class="table-dark">
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Role</th>
                    <th>Email</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="staffTable"></tbody>
              </table>
            </div>
          </div>

          <!-- Services Tab -->
          <div class="tab-pane fade" id="services-panel" role="tabpanel" aria-labelledby="services-tab">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2>Services Management</h2>
              <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#serviceModal" onclick="openServiceModal()">+ Add Service</button>
            </div>
            <div id="servicesContainer" class="table-responsive">
              <table class="table table-striped table-hover">
                <thead class="table-dark">
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Duration (min)</th>
                    <th>Price ($)</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="servicesTable"></tbody>
              </table>
            </div>
          </div>

          <!-- Appointments Tab with Calendar -->
          <div class="tab-pane fade" id="appointments-panel" role="tabpanel" aria-labelledby="appointments-tab">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2>Appointments Calendar</h2>
              <div>
                <button class="btn btn-outline-secondary btn-sm" onclick="goToPreviousMonth()">‚Üê Previous</button>
                <span id="currentMonth" class="ms-3 me-3"></span>
                <button class="btn btn-outline-secondary btn-sm" onclick="goToNextMonth()">Next ‚Üí</button>
              </div>
            </div>
            <div id="calendarContainer">
              <div id="calendarGrid" class="calendar-grid"></div>
            </div>
          </div>

          <!-- Income Tab -->
          <div class="tab-pane fade" id="income-panel" role="tabpanel" aria-labelledby="income-tab">
            <!-- Summary Cards -->
            <div class="row mb-4">
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="card income-summary-card income-today">
                  <div class="card-body text-center">
                    <h6 class="card-title text-muted">Today</h6>
                    <h3 class="income-amount" id="incomeTodayTotal">$0.00</h3>
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="card income-summary-card income-week">
                  <div class="card-body text-center">
                    <h6 class="card-title text-muted">This Week</h6>
                    <h3 class="income-amount" id="incomeWeekTotal">$0.00</h3>
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="card income-summary-card income-month">
                  <div class="card-body text-center">
                    <h6 class="card-title text-muted">This Month</h6>
                    <h3 class="income-amount" id="incomeMonthTotal">$0.00</h3>
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="card income-summary-card income-alltime">
                  <div class="card-body text-center">
                    <h6 class="card-title text-muted">All-Time</h6>
                    <h3 class="income-amount" id="incomeAllTimeTotal">$0.00</h3>
                  </div>
                </div>
              </div>
            </div>

            <!-- Filters -->
            <div class="card mb-4">
              <div class="card-header bg-light">
                <h5 class="mb-0">Filter Income Records</h5>
              </div>
              <div class="card-body">
                <div class="row g-3">
                  <div class="col-md-3">
                    <label for="incomeFilterDateFrom" class="form-label">From Date</label>
                    <input type="date" class="form-control" id="incomeFilterDateFrom">
                  </div>
                  <div class="col-md-3">
                    <label for="incomeFilterDateTo" class="form-label">To Date</label>
                    <input type="date" class="form-control" id="incomeFilterDateTo">
                  </div>
                  <div class="col-md-2">
                    <label for="incomeFilterStaff" class="form-label">Staff</label>
                    <select class="form-control" id="incomeFilterStaff">
                      <option value="">All Staff</option>
                    </select>
                  </div>
                  <div class="col-md-2">
                    <label for="incomeFilterPayment" class="form-label">Payment</label>
                    <select class="form-control" id="incomeFilterPayment">
                      <option value="">All Methods</option>
                      <option value="cash">Cash</option>
                      <option value="card">Card</option>
                      <option value="check">Check</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div class="col-md-2 d-flex align-items-end">
                    <button class="btn btn-secondary w-100" onclick="clearIncomeFilters()">Clear Filters</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Income Table -->
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2>Income Records</h2>
              <span class="text-muted" id="incomeRecordCount">0 records</span>
            </div>
            <div class="table-responsive">
              <table class="table table-striped table-hover" id="incomeTable">
                <thead class="table-dark">
                  <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Client</th>
                    <th>Staff</th>
                    <th>Service</th>
                    <th>Amount</th>
                    <th>Payment</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="incomeTableBody"></tbody>
              </table>
            </div>

            <!-- Reports Section -->
            <div class="row mt-4">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header bg-light">
                    <h5 class="mb-0">Income by Staff</h5>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table table-sm" id="incomeByStaffTable">
                        <thead>
                          <tr>
                            <th>Staff Member</th>
                            <th class="text-end">Total</th>
                          </tr>
                        </thead>
                        <tbody id="incomeByStaffBody"></tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header bg-light">
                    <h5 class="mb-0">Income by Service</h5>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table table-sm" id="incomeByServiceTable">
                        <thead>
                          <tr>
                            <th>Service</th>
                            <th class="text-end">Total</th>
                          </tr>
                        </thead>
                        <tbody id="incomeByServiceBody"></tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== MODALS ===== -->

  <!-- Client Modal -->
  <div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="clientModalLabel">Add/Edit Client</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="clientForm">
          <div class="modal-body">
            <input type="hidden" id="clientId">
            <div class="mb-3">
              <label for="clientName" class="form-label">Name</label>
              <input type="text" class="form-control" id="clientName" required>
            </div>
            <div class="mb-3">
              <label for="clientEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="clientEmail" required>
            </div>
            <div class="mb-3">
              <label for="clientPhone" class="form-label">Phone</label>
              <input type="tel" class="form-control" id="clientPhone" required>
            </div>
            <div class="mb-3">
              <label for="clientNotes" class="form-label">Notes</label>
              <textarea class="form-control" id="clientNotes" rows="2"></textarea>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="clientVIP">
              <label class="form-check-label" for="clientVIP">VIP Client</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="clientBad">
              <label class="form-check-label" for="clientBad">Bad Client</label>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Staff Modal -->
  <div class="modal fade" id="staffModal" tabindex="-1" aria-labelledby="staffModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staffModalLabel">Add/Edit Staff</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="staffForm">
          <div class="modal-body">
            <input type="hidden" id="staffId">
            <div class="mb-3">
              <label for="staffName" class="form-label">Name</label>
              <input type="text" class="form-control" id="staffName" required>
            </div>
            <div class="mb-3">
              <label for="staffRole" class="form-label">Role</label>
              <input type="text" class="form-control" id="staffRole" placeholder="e.g., Stylist, Manicurist" required>
            </div>
            <div class="mb-3">
              <label for="staffEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="staffEmail" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Service Modal -->
  <div class="modal fade" id="serviceModal" tabindex="-1" aria-labelledby="serviceModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="serviceModalLabel">Add/Edit Service</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="serviceForm">
          <div class="modal-body">
            <input type="hidden" id="serviceId">
            <div class="mb-3">
              <label for="serviceName" class="form-label">Service Name</label>
              <input type="text" class="form-control" id="serviceName" required>
            </div>
            <div class="mb-3">
              <label for="serviceDuration" class="form-label">Duration (minutes)</label>
              <input type="number" class="form-control" id="serviceDuration" min="15" step="15" required>
            </div>
            <div class="mb-3">
              <label for="servicePrice" class="form-label">Price ($)</label>
              <input type="number" class="form-control" id="servicePrice" min="0" step="0.01" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Appointment Modal -->
  <div class="modal fade" id="appointmentModal" tabindex="-1" aria-labelledby="appointmentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="appointmentModalLabel">Add/Edit Appointment</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="appointmentForm">
          <div class="modal-body">
            <input type="hidden" id="appointmentId">
            <input type="hidden" id="appointmentDate">
            <div class="mb-3">
              <label for="appointmentClient" class="form-label">Client</label>
              <select class="form-control" id="appointmentClient" required>
                <option value="">Select a client</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="appointmentStaff" class="form-label">Staff Member</label>
              <select class="form-control" id="appointmentStaff" required>
                <option value="">Select staff member</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="appointmentService" class="form-label">Service</label>
              <select class="form-control" id="appointmentService" required>
                <option value="">Select a service</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="appointmentTime" class="form-label">Time</label>
              <input type="time" class="form-control" id="appointmentTime" required>
            </div>
            <div class="mb-3">
              <label for="appointmentStatus" class="form-label">Status</label>
              <select class="form-control" id="appointmentStatus">
                <option value="pending">Pending</option>
                <option value="complete">Complete</option>
                <option value="deleted_by_user">Deleted by User</option>
                <option value="deleted_by_staff">Deleted by Staff</option>
                <option value="no_show">No Show</option>
              </select>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Day View Modal (for viewing/managing appointments on a specific day) -->
  <div class="modal fade" id="dayViewModal" tabindex="-1" aria-labelledby="dayViewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="dayViewModalLabel">Appointments for <span id="dayViewDate"></span></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <button class="btn btn-primary btn-sm mb-3" onclick="openAppointmentModalForDay()">+ Add Appointment</button>
          <div id="dayAppointmentsContainer">
            <table class="table table-sm table-striped">
              <thead class="table-light">
                <tr>
                  <th>Time</th>
                  <th>Client</th>
                  <th>Staff</th>
                  <th>Service</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="dayAppointmentsTable"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Income Modal -->
  <div class="modal fade" id="incomeModal" tabindex="-1" aria-labelledby="incomeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="incomeModalLabel">Edit Income Record</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="incomeForm">
          <div class="modal-body">
            <input type="hidden" id="incomeId">
            <div class="mb-3">
              <label class="form-label fw-bold">Client</label>
              <p id="incomeClientDisplay" class="form-control-plaintext border rounded p-2 bg-light"></p>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold">Service</label>
              <p id="incomeServiceDisplay" class="form-control-plaintext border rounded p-2 bg-light"></p>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold">Amount</label>
              <p id="incomeAmountDisplay" class="form-control-plaintext border rounded p-2 bg-light text-success fw-bold"></p>
            </div>
            <div class="mb-3">
              <label for="incomePaymentMethod" class="form-label">Payment Method</label>
              <select class="form-control" id="incomePaymentMethod" required>
                <option value="cash">Cash</option>
                <option value="card">Card</option>
                <option value="check">Check</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="incomeNotes" class="form-label">Notes</label>
              <textarea class="form-control" id="incomeNotes" rows="3" placeholder="Add any additional notes..."></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom App JS -->
  <script src="js/app.js"></script>
</body>
</html>
